(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),o=t.n(r),a=t(16),i=t.n(a),u=(t(25),t(19)),s=t(5),d=function(e){var n=e.searchText,t=e.onChange;return Object(c.jsxs)(c.Fragment,{children:["filter shown with: ",Object(c.jsx)("input",{value:n,onChange:t})]})},j=t(17),f=t(18),b=function(){function e(){Object(j.a)(this,e),this.id=0,this.name="",this.number=""}return Object(f.a)(e,[{key:"equals",value:function(e){return this.id===e.id||this.name.toLowerCase()===e.name.toLowerCase()}}],[{key:"from",value:function(n){return Object.assign(new e,n)}}]),e}(),h=function(e){var n=e.onSubmit,t=e.onChange,r=e.person,o=function(e){var n=b.from(r);n[e.target.name]=e.target.value,t(n)};return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{name:"name",value:r.name,onChange:o})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{name:"number",value:r.number,onChange:o})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.person,t=e.onDelete;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("li",{children:[n.name," ",n.number,"\xa0",Object(c.jsx)("button",{onClick:t,children:"delete"})]})})},m=function(e){var n=e.persons,t=e.searchText,r=e.onDelete;return Object(c.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(c.jsx)(l,{person:e,onDelete:function(){return r(e)}},e.name)}))})},O=function(e){var n=e.message;return null==n?Object(c.jsx)("div",{}):Object(c.jsx)("div",{className:"notification notification--".concat(n.type),children:n.text})},p=t(4),x=t.n(p),v="/api/persons",g=function(){return x.a.get(v).then((function(e){return e.data.map((function(e){return b.from(e)}))}))},w=function(e){return delete e.id,x.a.post(v,e)},y=function(e){return x.a.put("".concat(v,"/").concat(e.id),e)},C=function(e){return x.a.delete("".concat(v,"/").concat(e.id))},k=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),i=Object(s.a)(a,2),j=i[0],f=i[1],l=Object(r.useState)(new b),p=Object(s.a)(l,2),x=p[0],v=p[1],k=Object(r.useState)(null),S=Object(s.a)(k,2),D=S[0],T=S[1];Object(r.useEffect)((function(){g().then((function(e){return o(e)}))}),[]);var q=function(){return v(new b)},A=function(e){T(e),setTimeout((function(){T(null)}),3e3)},L=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An error occurred";A({type:"error",text:"error"in e.data?e.data.error:n})},E=function(e){y(e).then((function(){o(t.map((function(n){return n.id===e.id?e:n}))),q(),A({type:"success",text:"Updated ".concat(e.name)})})).catch((function(e){L(e.response)}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(O,{message:D}),Object(c.jsx)(d,{text:j,onChange:function(e){f(e.target.value)}}),Object(c.jsx)("h2",{children:"Add a new"}),Object(c.jsx)(h,{onSubmit:function(e){e.preventDefault(),function(e){if(0!==e.name.length){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return e.id=t[n].id,void(window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))&&E(e));w(e).then((function(n){o([].concat(Object(u.a)(t),[b.from(n.data)])),q(),A({type:"success",text:"Added ".concat(e.name)})})).catch((function(e){return L(e.response)}))}}(x)},onChange:function(e){v(e)},person:x}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(m,{persons:t,searchText:j,onDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&C(e).then((function(n){o(t.filter((function(n){return!n.equals(e)}))),A({type:"success",text:"Removed ".concat(e.name)})})).catch((function(n){L(n.response,"".concat(e.name," was already removed from the server")),o(t.filter((function(n){return n.id!==e.id})))}))}})]})};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.c0a04e29.chunk.js.map